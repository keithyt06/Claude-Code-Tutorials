# æ¨¡å— 7: åŠŸèƒ½å¢å¼º

> æ·»åŠ é«˜çº§åŠŸèƒ½å’Œä¼˜åŒ–

## å­¦ä¹ ç›®æ ‡

- å®ç°æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½
- æ·»åŠ æ’åºåŠŸèƒ½
- ä¼˜åŒ–æ€§èƒ½
- æ”¹è¿›ç”¨æˆ·ä½“éªŒ
- æ·»åŠ æ•°æ®éªŒè¯

## 1. é«˜çº§æœç´¢

```javascript
const SearchManager = {
    search(tasks, query) {
        const lowerQuery = query.toLowerCase();
        return tasks.filter(task => 
            task.title.toLowerCase().includes(lowerQuery) ||
            task.description.toLowerCase().includes(lowerQuery) ||
            task.category.toLowerCase().includes(lowerQuery)
        );
    },

    filterByCategory(tasks, category) {
        return tasks.filter(task => task.category === category);
    },

    filterByStatus(tasks, completed) {
        return tasks.filter(task => task.completed === completed);
    },

    filterByPriority(tasks, priority) {
        return tasks.filter(task => task.priority === priority);
    },

    filterByDateRange(tasks, startDate, endDate) {
        return tasks.filter(task => {
            const taskDate = new Date(task.dueDate);
            return taskDate >= startDate && taskDate <= endDate;
        });
    }
};
```

## 2. æ’åºåŠŸèƒ½

```javascript
const SortManager = {
    byDate(tasks, ascending = true) {
        return tasks.sort((a, b) => {
            const dateA = new Date(a.createdAt);
            const dateB = new Date(b.createdAt);
            return ascending ? dateA - dateB : dateB - dateA;
        });
    },

    byPriority(tasks) {
        const priorityOrder = { high: 0, medium: 1, low: 2 };
        return tasks.sort((a, b) => 
            priorityOrder[a.priority] - priorityOrder[b.priority]
        );
    },

    byTitle(tasks) {
        return tasks.sort((a, b) => 
            a.title.localeCompare(b.title, 'zh-CN')
        );
    },

    byDueDate(tasks) {
        return tasks.sort((a, b) => {
            if (!a.dueDate) return 1;
            if (!b.dueDate) return -1;
            return new Date(a.dueDate) - new Date(b.dueDate);
        });
    }
};
```

## 3. è¡¨å•éªŒè¯

```javascript
const ValidationManager = {
    validateTask(data) {
        const errors = [];

        if (!data.title || data.title.trim().length === 0) {
            errors.push('ä»»åŠ¡æ ‡é¢˜ä¸èƒ½ä¸ºç©º');
        }

        if (data.title && data.title.length > 100) {
            errors.push('ä»»åŠ¡æ ‡é¢˜ä¸èƒ½è¶…è¿‡100ä¸ªå­—ç¬¦');
        }

        if (data.description && data.description.length > 500) {
            errors.push('ä»»åŠ¡æè¿°ä¸èƒ½è¶…è¿‡500ä¸ªå­—ç¬¦');
        }

        if (data.dueDate) {
            const dueDate = new Date(data.dueDate);
            if (dueDate < new Date()) {
                errors.push('åˆ°æœŸæ—¥æœŸä¸èƒ½æ—©äºå½“å‰æ—¥æœŸ');
            }
        }

        return {
            valid: errors.length === 0,
            errors
        };
    },

    sanitizeInput(input) {
        return input.trim()
            .replace(/[<>]/g, '')
            .replace(/javascript:/gi, '');
    }
};
```

## 4. æ€§èƒ½ä¼˜åŒ–

```javascript
// é˜²æŠ–å‡½æ•°
function debounce(func, delay) {
    let timeoutId;
    return function(...args) {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() => func.apply(this, args), delay);
    };
}

// èŠ‚æµå‡½æ•°
function throttle(func, limit) {
    let inThrottle;
    return function(...args) {
        if (!inThrottle) {
            func.apply(this, args);
            inThrottle = true;
            setTimeout(() => inThrottle = false, limit);
        }
    };
}

// ä½¿ç”¨ç¤ºä¾‹
const debouncedSearch = debounce((query) => {
    TodoApp.searchTasks(query);
}, 300);

document.getElementById('searchInput').addEventListener('input', (e) => {
    debouncedSearch(e.target.value);
});
```

## 5. ç”¨æˆ·ä½“éªŒå¢å¼º

```javascript
// åŠ è½½çŠ¶æ€
function showLoading() {
    document.getElementById('loading').style.display = 'block';
}

function hideLoading() {
    document.getElementById('loading').style.display = 'none';
}

// é€šçŸ¥ç³»ç»Ÿ
const NotificationManager = {
    show(message, type = 'info') {
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.textContent = message;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.classList.add('show');
        }, 10);
        
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }, 3000);
    },

    success(message) {
        this.show(message, 'success');
    },

    error(message) {
        this.show(message, 'error');
    },

    info(message) {
        this.show(message, 'info');
    }
};
```

## 6. æ‰¹é‡æ“ä½œ

```javascript
const BatchOperations = {
    selectedTasks: new Set(),

    selectTask(id) {
        this.selectedTasks.add(id);
    },

    deselectTask(id) {
        this.selectedTasks.delete(id);
    },

    selectAll(tasks) {
        tasks.forEach(task => this.selectedTasks.add(task.id));
    },

    deselectAll() {
        this.selectedTasks.clear();
    },

    deleteSelected() {
        this.selectedTasks.forEach(id => {
            StorageManager.deleteTask(id);
        });
        this.selectedTasks.clear();
        TodoApp.render();
        NotificationManager.success('å·²åˆ é™¤é€‰ä¸­çš„ä»»åŠ¡');
    },

    completeSelected() {
        this.selectedTasks.forEach(id => {
            const task = TodoApp.tasks.find(t => t.id === id);
            if (task) {
                task.completed = true;
                StorageManager.saveTasks(TodoApp.tasks);
            }
        });
        this.selectedTasks.clear();
        TodoApp.render();
        NotificationManager.success('å·²å®Œæˆé€‰ä¸­çš„ä»»åŠ¡');
    }
};
```

## å…³é”®è¦ç‚¹

1. **æœç´¢ä¼˜åŒ–** - ä½¿ç”¨é˜²æŠ–æå‡æ€§èƒ½
2. **æ•°æ®éªŒè¯** - ç¡®ä¿æ•°æ®å®Œæ•´æ€§
3. **ç”¨æˆ·åé¦ˆ** - æä¾›å³æ—¶é€šçŸ¥
4. **æ‰¹é‡æ“ä½œ** - æé«˜æ“ä½œæ•ˆç‡
5. **æ€§èƒ½ä¼˜åŒ–** - å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“

## ä¸‹ä¸€æ­¥

ğŸ‘‰ **[æ¨¡å— 8: éƒ¨ç½²ä¸Šçº¿](./08-éƒ¨ç½²ä¸Šçº¿.md)** - å°†åº”ç”¨éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

---

ğŸ“š **è¿”å›**: [ç¬¬å…­è¯¾æ¦‚è¿°](./index.md)
