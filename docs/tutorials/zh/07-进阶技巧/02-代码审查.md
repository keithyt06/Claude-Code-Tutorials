# æ¨¡å— 2: ä»£ç å®¡æŸ¥

> æŒæ¡ä»£ç å®¡æŸ¥å’Œä¼˜åŒ–æŠ€å·§

## è¯·æ±‚ä»£ç å®¡æŸ¥

```
ä½ :å®¡æŸ¥è¿™æ®µä»£ç ,æŒ‡å‡ºé—®é¢˜å’Œæ”¹è¿›å»ºè®®:

function getUserData(id) {
  fetch('https://api.example.com/users/' + id)
    .then(res => res.json())
    .then(data => {
      console.log(data)
      document.getElementById('user-name').innerHTML = data.name
    })
}

Claude:æˆ‘å‘ç°ä»¥ä¸‹é—®é¢˜:
1. ç¼ºå°‘é”™è¯¯å¤„ç†
2. æ²¡æœ‰æ£€æŸ¥å“åº”çŠ¶æ€
3. ä½¿ç”¨ innerHTML æœ‰ XSS é£é™©
4. ç¡¬ç¼–ç  DOM ID
5. æ²¡æœ‰è¿”å›å€¼

æ”¹è¿›å»ºè®®:

async function getUserData(id) {
  try {
    const response = await fetch(`https://api.example.com/users/${id}`)
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`)
    }
    
    const data = await response.json()
    const userNameEl = document.getElementById('user-name')
    if (userNameEl) {
      userNameEl.textContent = data.name  // é˜²æ­¢ XSS
    }
    
    return data
  } catch (error) {
    console.error('Failed to fetch user data:', error)
    throw error
  }
}
```

## æ€§èƒ½ä¼˜åŒ–åˆ†æ

```
ä½ :è¿™æ®µä»£ç æœ‰æ€§èƒ½é—®é¢˜,å¸®æˆ‘ä¼˜åŒ–:

function filterProducts(products, keyword) {
  let result = []
  for (let i = 0; i < products.length; i++) {
    for (let j = 0; j < products[i].tags.length; j++) {
      if (products[i].tags[j].includes(keyword)) {
        result.push(products[i])
        break
      }
    }
  }
  return result
}

Claude:ä¼˜åŒ–æ–¹æ¡ˆ:

function filterProducts(products, keyword) {
  return products.filter(product =>
    product.tags.some(tag => tag.includes(keyword))
  )
}

// æ€§èƒ½å¯¹æ¯”:
// åŸä»£ç : ~450ms (10000æ¡æ•°æ®)
// ä¼˜åŒ–å: ~180ms (60% æå‡)
```

## ä»£ç é‡æ„å»ºè®®

å°†å¤§ç»„ä»¶æ‹†åˆ†ä¸ºå°ç»„ä»¶:
- æ¯ä¸ªç»„ä»¶èŒè´£å•ä¸€
- ä¾¿äºæµ‹è¯•
- å¯å¤ç”¨æ€§é«˜
- æ˜“äºç»´æŠ¤

## å…³é”®è¦ç‚¹

1. **ä»£ç è´¨é‡** - å¯è¯»æ€§ã€å¯ç»´æŠ¤æ€§
2. **æ€§èƒ½ä¼˜åŒ–** - æ—¶é—´å’Œç©ºé—´å¤æ‚åº¦
3. **å®‰å…¨æ€§** - å¸¸è§æ¼æ´æ£€æŸ¥
4. **æœ€ä½³å®è·µ** - éµå¾ªç¼–ç è§„èŒƒ

ğŸ‘‰ ä¸‹ä¸€ä¸ª: [æ¨¡å— 3: è°ƒè¯•æŠ€å·§](./03-è°ƒè¯•æŠ€å·§.md)
