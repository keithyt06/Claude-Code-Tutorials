# æ¨¡å— 4: è®¾è®¡æ¨¡å¼

> åº”ç”¨å¸¸è§è®¾è®¡æ¨¡å¼

## å•ä¾‹æ¨¡å¼

```javascript
class Config {
  static instance = null;
  
  constructor() {
    if (Config.instance) {
      return Config.instance;
    }
    
    this.settings = {
      apiUrl: 'https://api.example.com',
      theme: 'light',
      language: 'zh-CN'
    };
    
    Config.instance = this;
  }
  
  get(key) {
    return this.settings[key];
  }
  
  set(key, value) {
    this.settings[key] = value;
  }
}

// ä½¿ç”¨
const config1 = new Config();
const config2 = new Config();
console.log(config1 === config2);  // true
```

## è§‚å¯Ÿè€…æ¨¡å¼

```javascript
class EventEmitter {
  constructor() {
    this.events = {};
  }
  
  on(event, callback) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(callback);
    
    return () => this.off(event, callback);
  }
  
  off(event, callback) {
    if (!this.events[event]) return;
    this.events[event] = this.events[event].filter(cb => cb !== callback);
  }
  
  emit(event, data) {
    if (!this.events[event]) return;
    this.events[event].forEach(callback => callback(data));
  }
}

// ä½¿ç”¨
const emitter = new EventEmitter();
emitter.on('user:login', (user) => {
  console.log('ç”¨æˆ·ç™»å½•:', user.name);
  updateUI(user);
});
emitter.emit('user:login', { name: 'å¼ ä¸‰', id: 123 });
```

## å·¥å‚æ¨¡å¼

```javascript
class FormFieldFactory {
  static createField(type, config) {
    switch (type) {
      case 'text':
        return new TextField(config);
      case 'select':
        return new SelectField(config);
      case 'date':
        return new DateField(config);
      default:
        throw new Error(`Unknown field type: ${type}`);
    }
  }
}

// ä½¿ç”¨
const nameField = FormFieldFactory.createField('text', {
  name: 'username',
  label: 'ç”¨æˆ·å',
  required: true
});
```

## å…³é”®è¦ç‚¹

1. **å•ä¾‹** - ç¡®ä¿åªæœ‰ä¸€ä¸ªå®ä¾‹
2. **è§‚å¯Ÿè€…** - äº‹ä»¶é©±åŠ¨ç¼–ç¨‹
3. **å·¥å‚** - åˆ›å»ºå¯¹è±¡çš„ç»Ÿä¸€æ¥å£
4. **é€‰æ‹©åˆé€‚** - æ ¹æ®åœºæ™¯é€‰æ‹©æ¨¡å¼

ğŸ‘‰ ä¸‹ä¸€ä¸ª: [æ¨¡å— 5: é”™è¯¯å¤„ç†](./05-é”™è¯¯å¤„ç†.md)
