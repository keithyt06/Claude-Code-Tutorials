# ç¬¬å…«è¯¾ï¼šClaude Code é«˜çº§åº”ç”¨

> ğŸ¯ **å­¦ä¹ ç›®æ ‡**ï¼šæŒæ¡ä¸ AI åä½œçš„é«˜çº§æŠ€å·§ï¼Œæ„å»ºå¤æ‚é¡¹ç›®

## 1. é«˜æ•ˆåä½œæ¨¡å¼

### AI Pair Programmingï¼ˆAI ç»“å¯¹ç¼–ç¨‹ï¼‰

**TDD æ¨¡å¼ï¼ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰**ï¼š
```
ä½ ï¼šæˆ‘è¦å®ç°ä¸€ä¸ªè´­ç‰©è½¦åŠŸèƒ½ï¼Œæˆ‘ä»¬ç”¨ TDD æ–¹å¼å¼€å‘

Claudeï¼šå¥½çš„ï¼Œè®©æˆ‘ä»¬å…ˆå†™æµ‹è¯•ï¼š

describe('ShoppingCart', () => {
  test('should add item to cart', () => {
    const cart = new ShoppingCart()
    cart.addItem({ id: 1, name: 'Book', price: 29.99 })
    expect(cart.items.length).toBe(1)
  })

  test('should calculate total price', () => {
    const cart = new ShoppingCart()
    cart.addItem({ id: 1, price: 10 })
    cart.addItem({ id: 2, price: 20 })
    expect(cart.getTotal()).toBe(30)
  })
})

æµ‹è¯•å†™å¥½äº†ï¼Œç°åœ¨å®ç°åŠŸèƒ½å—ï¼Ÿ

ä½ ï¼šæ˜¯çš„ï¼Œå®ç°æœ€ç®€å•èƒ½é€šè¿‡æµ‹è¯•çš„ä»£ç 

Claudeï¼š[å®ç° ShoppingCart ç±»]

ä½ ï¼šæµ‹è¯•é€šè¿‡äº†ï¼ç°åœ¨é‡æ„ä»£ç ï¼Œè®©å®ƒæ›´ä¼˜é›…

Claudeï¼š[ä¼˜åŒ–å®ç°]
```

### æ¸è¿›å¼é‡æ„

```
ä½ ï¼šæˆ‘æœ‰ä¸€ä¸ªæ—§é¡¹ç›®ï¼Œæƒ³é‡æ„ä½†ä¸èƒ½å½±å“ç°æœ‰åŠŸèƒ½ï¼Œæ€ä¹ˆåšï¼Ÿ

Claudeï¼šä½¿ç”¨æ¸è¿›å¼é‡æ„ç­–ç•¥ï¼š

ç¬¬ä¸€é˜¶æ®µï¼šæ·»åŠ æµ‹è¯•
1. ä¸ºç°æœ‰åŠŸèƒ½ç¼–å†™æµ‹è¯•
2. ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡ > 80%
3. å»ºç«‹æµ‹è¯•åŸºå‡†

ç¬¬äºŒé˜¶æ®µï¼šè¯†åˆ«é—®é¢˜
1. åˆ†æä»£ç å¼‚å‘³ï¼ˆCode Smellsï¼‰
2. è¯†åˆ«é‡å¤ä»£ç 
3. æ‰¾å‡ºè¿‡åº¦å¤æ‚çš„éƒ¨åˆ†

ç¬¬ä¸‰é˜¶æ®µï¼šå°æ­¥é‡æ„
1. æ¯æ¬¡åªé‡æ„ä¸€ä¸ªæ¨¡å—
2. ä¿æŒæµ‹è¯•é€šè¿‡
3. é¢‘ç¹æäº¤

ç¬¬å››é˜¶æ®µï¼šæ¸è¿›æ›¿æ¢
1. æ–°åŠŸèƒ½ç”¨æ–°æ¶æ„
2. æ—§åŠŸèƒ½é€æ­¥è¿ç§»
3. Strangler Patternï¼ˆç»æ€è€…æ¨¡å¼ï¼‰

æˆ‘ä»¬ä»å“ªä¸ªæ¨¡å—å¼€å§‹ï¼Ÿ
```

### ä»£ç å®¡æŸ¥åä½œ

```
ä½ ï¼šå¸®æˆ‘å®¡æŸ¥è¿™æ¬¡ Pull Requestï¼Œç»™å‡ºä¸“ä¸šçš„ä»£ç å®¡æŸ¥æ„è§

Claudeï¼šä»£ç å®¡æŸ¥æŠ¥å‘Šï¼š

âœ… ä¼˜ç‚¹ï¼š
1. ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ¨¡å—åˆ’åˆ†åˆç†
2. æœ‰å®Œæ•´çš„å•å…ƒæµ‹è¯•
3. é”™è¯¯å¤„ç†å®Œå–„

âš ï¸ éœ€è¦æ”¹è¿›ï¼š
1. å‡½æ•°è¿‡é•¿ï¼ˆline 45-120ï¼‰ï¼Œå»ºè®®æ‹†åˆ†
2. ç¼ºå°‘ç±»å‹æ³¨è§£ï¼ˆå¦‚æœä½¿ç”¨ TypeScriptï¼‰
3. éƒ¨åˆ†å˜é‡å‘½åä¸å¤Ÿè¯­ä¹‰åŒ–ï¼ˆå¦‚ data, tempï¼‰

ğŸ”´ é—®é¢˜ï¼š
1. æ½œåœ¨çš„å†…å­˜æ³„æ¼ï¼šaddEventListener æ²¡æœ‰æ¸…ç†
2. SQL æŸ¥è¯¢æ²¡æœ‰å‚æ•°åŒ–ï¼Œæœ‰æ³¨å…¥é£é™©
3. åŒæ­¥é˜»å¡æ“ä½œï¼ˆline 78ï¼‰åº”æ”¹ä¸ºå¼‚æ­¥

ğŸ“ å»ºè®®ï¼š
1. æ·»åŠ  JSDoc æ³¨é‡Š
2. è€ƒè™‘ä½¿ç”¨è®¾è®¡æ¨¡å¼é‡æ„ï¼ˆå»ºè®®ï¼šStrategy Patternï¼‰
3. æ€§èƒ½ï¼šå¯ä»¥æ·»åŠ ç¼“å­˜æœºåˆ¶

è¯¦ç»†ä¿®æ”¹å»ºè®®ï¼š
[å…·ä½“çš„ä»£ç ä¿®æ”¹]
```

## 2. å¤æ‚é¡¹ç›®æ¶æ„

### å¾®å‰ç«¯æ¶æ„

```
ä½ ï¼šè®¾è®¡ä¸€ä¸ªå¾®å‰ç«¯æ¶æ„ï¼Œå¤šä¸ªå›¢é˜Ÿç‹¬ç«‹å¼€å‘ä¸åŒæ¨¡å—

Claudeï¼šå¾®å‰ç«¯æ¶æ„æ–¹æ¡ˆï¼š

é¡¹ç›®ç»“æ„ï¼š
monorepo/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ shell/          # ä¸»å®¹å™¨åº”ç”¨
â”‚   â”œâ”€â”€ module-auth/    # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ module-dashboard/  # ä»ªè¡¨æ¿
â”‚   â”œâ”€â”€ module-settings/   # è®¾ç½®
â”‚   â””â”€â”€ shared/         # å…±äº«èµ„æº
â”œâ”€â”€ lerna.json
â””â”€â”€ package.json

Shell åº”ç”¨ï¼ˆå®¹å™¨ï¼‰ï¼š
// shell/src/app.js
class MicroFrontendContainer {
  constructor() {
    this.modules = new Map()
  }

  // æ³¨å†Œæ¨¡å—
  register(name, moduleFactory) {
    this.modules.set(name, moduleFactory)
  }

  // åŠ è½½æ¨¡å—
  async load(name, container) {
    if (!this.modules.has(name)) {
      // åŠ¨æ€åŠ è½½
      await this.loadModule(name)
    }

    const moduleFactory = this.modules.get(name)
    const module = await moduleFactory()

    module.mount(container)
    return module
  }

  // åŠ¨æ€åŠ è½½æ¨¡å—
  async loadModule(name) {
    const script = document.createElement('script')
    script.src = `/modules/${name}/index.js`

    return new Promise((resolve, reject) => {
      script.onload = resolve
      script.onerror = reject
      document.head.appendChild(script)
    })
  }
}

æ¨¡å—ç¤ºä¾‹ï¼ˆDashboardï¼‰ï¼š
// module-dashboard/src/index.js
export default {
  async mount(container) {
    // æ¸²æŸ“æ¨¡å—
    container.innerHTML = '<div id="dashboard">...</div>'

    // åˆå§‹åŒ–
    await this.init()
  },

  async unmount(container) {
    // æ¸…ç†èµ„æº
    container.innerHTML = ''
  },

  async init() {
    // æ¨¡å—åˆå§‹åŒ–é€»è¾‘
  }
}

æ¨¡å—é€šä¿¡ï¼ˆEvent Busï¼‰ï¼š
// shared/eventBus.js
class EventBus {
  constructor() {
    this.events = {}
  }

  publish(event, data) {
    if (this.events[event]) {
      this.events[event].forEach(callback => callback(data))
    }
  }

  subscribe(event, callback) {
    if (!this.events[event]) {
      this.events[event] = []
    }
    this.events[event].push(callback)

    // è¿”å›å–æ¶ˆè®¢é˜…å‡½æ•°
    return () => {
      this.events[event] = this.events[event]
        .filter(cb => cb !== callback)
    }
  }
}

export const eventBus = new EventBus()

ä½¿ç”¨ï¼š
// æ¨¡å— A å‘å¸ƒäº‹ä»¶
eventBus.publish('user:login', { userId: 123 })

// æ¨¡å— B è®¢é˜…äº‹ä»¶
eventBus.subscribe('user:login', (data) => {
  console.log('User logged in:', data.userId)
  updateUI(data)
})

éƒ¨ç½²é…ç½®ï¼š
- æ¯ä¸ªæ¨¡å—ç‹¬ç«‹éƒ¨ç½²
- ä½¿ç”¨ CDN æ‰˜ç®¡æ¨¡å—
- ç‰ˆæœ¬ç®¡ç†å’Œå›æ»šæœºåˆ¶
```

### æ’ä»¶ç³»ç»Ÿè®¾è®¡

```
ä½ ï¼šè®¾è®¡ä¸€ä¸ªæ’ä»¶ç³»ç»Ÿï¼Œè®©ç”¨æˆ·å¯ä»¥æ‰©å±•åº”ç”¨åŠŸèƒ½

Claudeï¼šæ’ä»¶ç³»ç»Ÿæ¶æ„ï¼š

// æ ¸å¿ƒï¼šPlugin Manager
class PluginManager {
  constructor() {
    this.plugins = new Map()
    this.hooks = new Map()
  }

  // æ³¨å†Œæ’ä»¶
  register(plugin) {
    // éªŒè¯æ’ä»¶
    if (!this.validatePlugin(plugin)) {
      throw new Error('Invalid plugin')
    }

    // ä¿å­˜æ’ä»¶
    this.plugins.set(plugin.name, plugin)

    // æ³¨å†Œé’©å­
    if (plugin.hooks) {
      Object.entries(plugin.hooks).forEach(([hook, handler]) => {
        this.registerHook(hook, handler)
      })
    }

    // è°ƒç”¨æ’ä»¶åˆå§‹åŒ–
    if (plugin.init) {
      plugin.init(this.getAPI())
    }

    console.log(`âœ… Plugin registered: ${plugin.name}`)
  }

  // æ³¨å†Œé’©å­
  registerHook(hookName, handler) {
    if (!this.hooks.has(hookName)) {
      this.hooks.set(hookName, [])
    }
    this.hooks.get(hookName).push(handler)
  }

  // è§¦å‘é’©å­
  async trigger(hookName, data) {
    if (!this.hooks.has(hookName)) {
      return data
    }

    let result = data

    for (const handler of this.hooks.get(hookName)) {
      result = await handler(result, this.getAPI())
    }

    return result
  }

  // æä¾›ç»™æ’ä»¶çš„ API
  getAPI() {
    return {
      // æ•°æ®è®¿é—®
      getData: (key) => this.appData.get(key),
      setData: (key, value) => this.appData.set(key, value),

      // UI æ‰©å±•
      addMenuItem: (item) => this.menu.addItem(item),
      addPage: (route, component) => this.router.addRoute(route, component),

      // é€šçŸ¥
      notify: (message, type) => this.notifications.show(message, type),

      // å·¥å…·å‡½æ•°
      http: this.httpClient,
      storage: this.storage
    }
  }

  // éªŒè¯æ’ä»¶
  validatePlugin(plugin) {
    return plugin.name && plugin.version
  }

  // å¸è½½æ’ä»¶
  unregister(pluginName) {
    const plugin = this.plugins.get(pluginName)

    if (plugin && plugin.destroy) {
      plugin.destroy()
    }

    this.plugins.delete(pluginName)

    // ç§»é™¤é’©å­
    // ... æ¸…ç†é€»è¾‘
  }
}

// æ’ä»¶ç¤ºä¾‹ 1ï¼šä¸»é¢˜åˆ‡æ¢
const themePlugin = {
  name: 'theme-switcher',
  version: '1.0.0',

  init(api) {
    // æ·»åŠ èœå•é¡¹
    api.addMenuItem({
      label: 'åˆ‡æ¢ä¸»é¢˜',
      onClick: () => this.toggleTheme(api)
    })

    // åŠ è½½ä¿å­˜çš„ä¸»é¢˜
    const savedTheme = api.getData('theme') || 'light'
    this.applyTheme(savedTheme)
  },

  toggleTheme(api) {
    const current = api.getData('theme') || 'light'
    const newTheme = current === 'light' ? 'dark' : 'light'

    this.applyTheme(newTheme)
    api.setData('theme', newTheme)
    api.notify(`å·²åˆ‡æ¢åˆ°${newTheme === 'light' ? 'äº®è‰²' : 'æš—è‰²'}ä¸»é¢˜`, 'success')
  },

  applyTheme(theme) {
    document.body.classList.remove('theme-light', 'theme-dark')
    document.body.classList.add(`theme-${theme}`)
  }
}

// æ’ä»¶ç¤ºä¾‹ 2ï¼šæ•°æ®å¯¼å‡º
const exportPlugin = {
  name: 'data-exporter',
  version: '1.0.0',

  hooks: {
    // åœ¨æ•°æ®ä¿å­˜å‰å¤„ç†
    'before:save': async (data, api) => {
      // æ·»åŠ å…ƒæ•°æ®
      return {
        ...data,
        exportedAt: new Date().toISOString(),
        exportedBy: api.getData('currentUser')
      }
    }
  },

  init(api) {
    // æ·»åŠ å¯¼å‡ºæŒ‰é’®
    api.addMenuItem({
      label: 'å¯¼å‡ºæ•°æ®',
      onClick: () => this.exportData(api)
    })
  },

  async exportData(api) {
    const data = api.getData('appData')

    // è§¦å‘é’©å­å¤„ç†æ•°æ®
    const processedData = await api.trigger('before:save', data)

    // å¯¼å‡ºä¸º JSON
    const blob = new Blob([JSON.stringify(processedData, null, 2)], {
      type: 'application/json'
    })

    const url = URL.createObjectURL(blob)
    const link = document.createElement('a')
    link.href = url
    link.download = `export-${Date.now()}.json`
    link.click()

    api.notify('æ•°æ®å¯¼å‡ºæˆåŠŸ', 'success')
  }
}

// ä½¿ç”¨æ’ä»¶ç³»ç»Ÿ
const pluginManager = new PluginManager()

pluginManager.register(themePlugin)
pluginManager.register(exportPlugin)

// ç¬¬ä¸‰æ–¹å¼€å‘è€…ä¹Ÿå¯ä»¥åˆ›å»ºæ’ä»¶
const customPlugin = {
  name: 'my-custom-plugin',
  version: '1.0.0',

  init(api) {
    // è‡ªå®šä¹‰åŠŸèƒ½
  }
}

pluginManager.register(customPlugin)
```

## 3. è‡ªåŠ¨åŒ–æµ‹è¯•

### E2E æµ‹è¯•è‡ªåŠ¨åŒ–

```
ä½ ï¼šä¸ºæˆ‘çš„ Web åº”ç”¨åˆ›å»ºå®Œæ•´çš„ E2E æµ‹è¯•

Claudeï¼šä½¿ç”¨ Playwright åˆ›å»º E2E æµ‹è¯•ï¼š

// tests/e2e/user-flow.spec.js
const { test, expect } = require('@playwright/test')

test.describe('ç”¨æˆ·å®Œæ•´æµç¨‹', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('http://localhost:3000')
  })

  test('ç”¨æˆ·æ³¨å†Œæµç¨‹', async ({ page }) => {
    // 1. ç‚¹å‡»æ³¨å†ŒæŒ‰é’®
    await page.click('text=æ³¨å†Œ')

    // 2. å¡«å†™è¡¨å•
    await page.fill('[name="username"]', 'testuser')
    await page.fill('[name="email"]', 'test@example.com')
    await page.fill('[name="password"]', 'Test123!@#')

    // 3. æäº¤è¡¨å•
    await page.click('button[type="submit"]')

    // 4. éªŒè¯æˆåŠŸæ¶ˆæ¯
    await expect(page.locator('.success-message')).toBeVisible()
    await expect(page.locator('.success-message'))
      .toContainText('æ³¨å†ŒæˆåŠŸ')

    // 5. éªŒè¯è·³è½¬åˆ°ä»ªè¡¨æ¿
    await expect(page).toHaveURL(/.*dashboard/)
  })

  test('ç”¨æˆ·ç™»å½•æµç¨‹', async ({ page }) => {
    // 1. ç‚¹å‡»ç™»å½•
    await page.click('text=ç™»å½•')

    // 2. å¡«å†™å‡­æ®
    await page.fill('[name="username"]', 'testuser')
    await page.fill('[name="password"]', 'Test123!@#')

    // 3. æäº¤
    await page.click('button:has-text("ç™»å½•")')

    // 4. éªŒè¯ç™»å½•æˆåŠŸ
    await expect(page.locator('.user-avatar')).toBeVisible()

    // 5. éªŒè¯ç”¨æˆ·åæ˜¾ç¤º
    await expect(page.locator('.username'))
      .toContainText('testuser')
  })

  test('åˆ›å»ºä»»åŠ¡æµç¨‹', async ({ page, context }) => {
    // å…ˆç™»å½•
    await loginAsUser(page, 'testuser', 'Test123!@#')

    // 1. ç‚¹å‡»æ·»åŠ ä»»åŠ¡
    await page.click('text=æ·»åŠ ä»»åŠ¡')

    // 2. å¡«å†™ä»»åŠ¡ä¿¡æ¯
    await page.fill('[name="title"]', 'å®Œæˆæµ‹è¯•')
    await page.fill('[name="description"]', 'ç¼–å†™E2Eæµ‹è¯•')
    await page.selectOption('[name="priority"]', 'high')

    // 3. ä¸Šä¼ é™„ä»¶ï¼ˆå¦‚æœæœ‰ï¼‰
    await page.setInputFiles('[name="attachment"]', './test-file.pdf')

    // 4. æäº¤
    await page.click('button:has-text("åˆ›å»º")')

    // 5. éªŒè¯ä»»åŠ¡å‡ºç°åœ¨åˆ—è¡¨ä¸­
    await expect(page.locator('.task-item:has-text("å®Œæˆæµ‹è¯•")')).toBeVisible()

    // 6. éªŒè¯ä»»åŠ¡è¯¦æƒ…
    await page.click('.task-item:has-text("å®Œæˆæµ‹è¯•")')
    await expect(page.locator('.task-detail .title'))
      .toContainText('å®Œæˆæµ‹è¯•')
    await expect(page.locator('.task-detail .priority'))
      .toContainText('high')
  })

  test('æœç´¢åŠŸèƒ½', async ({ page }) => {
    await loginAsUser(page, 'testuser', 'Test123!@#')

    // 1. è¾“å…¥æœç´¢å…³é”®è¯
    await page.fill('[name="search"]', 'æµ‹è¯•')

    // 2. ç­‰å¾…æœç´¢ç»“æœ
    await page.waitForSelector('.search-results')

    // 3. éªŒè¯ç»“æœ
    const results = page.locator('.search-result-item')
    await expect(results).toHaveCount(3)  // å‡è®¾æœ‰3ä¸ªç»“æœ

    // 4. ç‚¹å‡»æœç´¢ç»“æœ
    await results.first().click()

    // 5. éªŒè¯å¯¼èˆªåˆ°æ­£ç¡®é¡µé¢
    await expect(page).toHaveURL(/.*task/)
  })

  test('å“åº”å¼è®¾è®¡', async ({ page }) => {
    // æµ‹è¯•ç§»åŠ¨ç«¯
    await page.setViewportSize({ width: 375, height: 667 })

    // éªŒè¯ç§»åŠ¨ç«¯èœå•
    await expect(page.locator('.mobile-menu-button')).toBeVisible()
    await expect(page.locator('.desktop-sidebar')).not.toBeVisible()

    // æ‰“å¼€ç§»åŠ¨èœå•
    await page.click('.mobile-menu-button')
    await expect(page.locator('.mobile-menu')).toBeVisible()

    // æµ‹è¯•å¹³æ¿
    await page.setViewportSize({ width: 768, height: 1024 })
    // ... å¹³æ¿å¸ƒå±€æµ‹è¯•

    // æµ‹è¯•æ¡Œé¢
    await page.setViewportSize({ width: 1920, height: 1080 })
    // ... æ¡Œé¢å¸ƒå±€æµ‹è¯•
  })
})

// è¾…åŠ©å‡½æ•°
async function loginAsUser(page, username, password) {
  await page.goto('http://localhost:3000/login')
  await page.fill('[name="username"]', username)
  await page.fill('[name="password"]', password)
  await page.click('button[type="submit"]')
  await page.waitForURL('**/dashboard')
}

// é…ç½®æ–‡ä»¶ï¼šplaywright.config.js
module.exports = {
  testDir: './tests/e2e',
  timeout: 30000,
  use: {
    baseURL: 'http://localhost:3000',
    screenshot: 'only-on-failure',
    video: 'retain-on-failure',
  },
  projects: [
    { name: 'chromium', use: { browserName: 'chromium' } },
    { name: 'firefox', use: { browserName: 'firefox' } },
    { name: 'webkit', use: { browserName: 'webkit' } }
  ]
}

è¿è¡Œæµ‹è¯•ï¼š
npm run test:e2e
```

### è§†è§‰å›å½’æµ‹è¯•

```
ä½ ï¼šæ·»åŠ è§†è§‰å›å½’æµ‹è¯•ï¼Œæ£€æµ‹ UI å˜åŒ–

Claudeï¼šä½¿ç”¨ Playwright çš„æˆªå›¾å¯¹æ¯”ï¼š

// tests/visual/visual-regression.spec.js
const { test, expect } = require('@playwright/test')

test.describe('è§†è§‰å›å½’æµ‹è¯•', () => {
  test('é¦–é¡µè§†è§‰æ£€æŸ¥', async ({ page }) => {
    await page.goto('/')

    // ç­‰å¾…é¡µé¢å®Œå…¨åŠ è½½
    await page.waitForLoadState('networkidle')

    // æˆªå›¾å¯¹æ¯”
    await expect(page).toHaveScreenshot('homepage.png', {
      fullPage: true,
      maxDiffPixels: 100  // å…è®¸çš„å·®å¼‚åƒç´ æ•°
    })
  })

  test('æŒ‰é’®æ ·å¼æ£€æŸ¥', async ({ page }) => {
    await page.goto('/components')

    // æˆªå–ç‰¹å®šå…ƒç´ 
    const button = page.locator('.primary-button')
    await expect(button).toHaveScreenshot('primary-button.png')

    // æ‚¬åœçŠ¶æ€
    await button.hover()
    await expect(button).toHaveScreenshot('primary-button-hover.png')

    // æ¿€æ´»çŠ¶æ€
    await button.focus()
    await expect(button).toHaveScreenshot('primary-button-active.png')
  })

  test('è¡¨å•å¸ƒå±€æ£€æŸ¥', async ({ page }) => {
    await page.goto('/form')

    // ä¸åŒè§†å£å¤§å°çš„æˆªå›¾
    const viewports = [
      { width: 375, height: 667, name: 'mobile' },
      { width: 768, height: 1024, name: 'tablet' },
      { width: 1920, height: 1080, name: 'desktop' }
    ]

    for (const viewport of viewports) {
      await page.setViewportSize(viewport)
      await expect(page).toHaveScreenshot(`form-${viewport.name}.png`)
    }
  })

  test('æ·±è‰²æ¨¡å¼æ£€æŸ¥', async ({ page }) => {
    await page.goto('/')

    // äº®è‰²æ¨¡å¼
    await expect(page).toHaveScreenshot('homepage-light.png')

    // åˆ‡æ¢åˆ°æ·±è‰²æ¨¡å¼
    await page.click('[data-theme-toggle]')
    await page.waitForTimeout(500)  // ç­‰å¾…ä¸»é¢˜åˆ‡æ¢åŠ¨ç”»

    // æ·±è‰²æ¨¡å¼
    await expect(page).toHaveScreenshot('homepage-dark.png')
  })
})

// æ›´æ–°åŸºå‡†æˆªå›¾
// npm run test:visual -- --update-snapshots
```

## 4. CI/CD é›†æˆ

### GitHub Actions é…ç½®

```
ä½ ï¼šé…ç½® CI/CD æµç¨‹ï¼Œè‡ªåŠ¨æµ‹è¯•å’Œéƒ¨ç½²

Claudeï¼šåˆ›å»º GitHub Actions å·¥ä½œæµï¼š

# .github/workflows/ci-cd.yml
name: CI/CD Pipeline

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  # ä»£ç è´¨é‡æ£€æŸ¥
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run ESLint
        run: npm run lint

      - name: Run Prettier check
        run: npm run format:check

  # å•å…ƒæµ‹è¯•
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install dependencies
        run: npm ci

      - name: Run unit tests
        run: npm run test:unit -- --coverage

      - name: Upload coverage
        uses: codecov/codecov-action@v3
        with:
          files: ./coverage/coverage-final.json

  # E2E æµ‹è¯•
  e2e:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install dependencies
        run: npm ci

      - name: Install Playwright
        run: npx playwright install --with-deps

      - name: Run E2E tests
        run: npm run test:e2e

      - name: Upload test results
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: playwright-report
          path: playwright-report/

  # æ„å»º
  build:
    needs: [lint, test]
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: Install dependencies
        run: npm ci

      - name: Build
        run: npm run build

      - name: Upload build artifacts
        uses: actions/upload-artifact@v3
        with:
          name: build
          path: dist/

  # éƒ¨ç½²åˆ° Staging
  deploy-staging:
    needs: [build, e2e]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/develop'
    environment:
      name: staging
      url: https://staging.example.com
    steps:
      - name: Download build
        uses: actions/download-artifact@v3
        with:
          name: build
          path: dist/

      - name: Deploy to Staging
        run: |
          # éƒ¨ç½²åˆ° staging æœåŠ¡å™¨
          echo "Deploying to staging..."
          # scp -r dist/* user@staging.example.com:/var/www/html

  # éƒ¨ç½²åˆ° Production
  deploy-production:
    needs: [build, e2e]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    environment:
      name: production
      url: https://example.com
    steps:
      - name: Download build
        uses: actions/download-artifact@v3
        with:
          name: build
          path: dist/

      - name: Deploy to Production
        run: |
          echo "Deploying to production..."
          # å®é™…éƒ¨ç½²å‘½ä»¤

      - name: Notify Slack
        uses: 8398a7/action-slack@v3
        with:
          status: ${{ job.status }}
          webhook_url: ${{ secrets.SLACK_WEBHOOK }}

  # æ€§èƒ½æµ‹è¯•
  performance:
    needs: [deploy-staging]
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/develop'
    steps:
      - uses: actions/checkout@v3

      - name: Run Lighthouse CI
        run: |
          npm install -g @lhci/cli
          lhci autorun --config=lighthouserc.json

      - name: Upload results
        uses: actions/upload-artifact@v3
        with:
          name: lighthouse-results
          path: .lighthouseci/

# Lighthouse é…ç½®ï¼šlighthouserc.json
{
  "ci": {
    "collect": {
      "url": ["https://staging.example.com"],
      "numberOfRuns": 3
    },
    "assert": {
      "assertions": {
        "categories:performance": ["error", {"minScore": 0.9}],
        "categories:accessibility": ["error", {"minScore": 0.9}],
        "categories:best-practices": ["error", {"minScore": 0.9}],
        "categories:seo": ["error", {"minScore": 0.9}]
      }
    },
    "upload": {
      "target": "temporary-public-storage"
    }
  }
}
```

## 5. å¤šè¯­è¨€é¡¹ç›®å¼€å‘

### Python + FastAPI åç«¯

```
ä½ ï¼šç”¨ Python FastAPI é‡å†™åç«¯API

Claudeï¼šåˆ›å»º FastAPI åç«¯ï¼š

# backend/main.py
from fastapi import FastAPI, HTTPException, Depends
from fastapi.middleware.cors import CORSMiddleware
from pydantic import BaseModel
from typing import List, Optional
import uvicorn

app = FastAPI(title="Task API", version="1.0.0")

# CORS é…ç½®
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:3000"],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# æ•°æ®æ¨¡å‹
class Task(BaseModel):
    id: Optional[int] = None
    title: str
    description: Optional[str] = None
    completed: bool = False
    priority: str = "medium"

class TaskCreate(BaseModel):
    title: str
    description: Optional[str] = None
    priority: str = "medium"

class TaskUpdate(BaseModel):
    title: Optional[str] = None
    description: Optional[str] = None
    completed: Optional[bool] = None
    priority: Optional[str] = None

# æ•°æ®åº“ï¼ˆç¤ºä¾‹ç”¨å†…å­˜ï¼‰
tasks_db = []
next_id = 1

# è·¯ç”±
@app.get("/")
async def root():
    return {"message": "Task API", "version": "1.0.0"}

@app.get("/api/tasks", response_model=List[Task])
async def get_tasks():
    """è·å–æ‰€æœ‰ä»»åŠ¡"""
    return tasks_db

@app.get("/api/tasks/{task_id}", response_model=Task)
async def get_task(task_id: int):
    """è·å–å•ä¸ªä»»åŠ¡"""
    task = next((t for t in tasks_db if t['id'] == task_id), None)
    if not task:
        raise HTTPException(status_code=404, detail="Task not found")
    return task

@app.post("/api/tasks", response_model=Task, status_code=201)
async def create_task(task: TaskCreate):
    """åˆ›å»ºæ–°ä»»åŠ¡"""
    global next_id
    new_task = {
        "id": next_id,
        **task.dict()
    }
    tasks_db.append(new_task)
    next_id += 1
    return new_task

@app.put("/api/tasks/{task_id}", response_model=Task)
async def update_task(task_id: int, task: TaskUpdate):
    """æ›´æ–°ä»»åŠ¡"""
    existing_task = next((t for t in tasks_db if t['id'] == task_id), None)
    if not existing_task:
        raise HTTPException(status_code=404, detail="Task not found")

    # æ›´æ–°å­—æ®µ
    update_data = task.dict(exclude_unset=True)
    for key, value in update_data.items():
        existing_task[key] = value

    return existing_task

@app.delete("/api/tasks/{task_id}", status_code=204)
async def delete_task(task_id: int):
    """åˆ é™¤ä»»åŠ¡"""
    global tasks_db
    tasks_db = [t for t in tasks_db if t['id'] != task_id]
    return None

# å¥åº·æ£€æŸ¥
@app.get("/health")
async def health_check():
    return {"status": "healthy"}

if __name__ == "__main__":
    uvicorn.run(app, host="0.0.0.0", port=8000)

# requirements.txt
fastapi==0.104.1
uvicorn[standard]==0.24.0
pydantic==2.5.0

# å®‰è£…å’Œè¿è¡Œ
# pip install -r requirements.txt
# python main.py
```

## 6. æ€»ç»“å’Œå±•æœ›

### ä½ å·²ç»æŒæ¡çš„æŠ€èƒ½

âœ… **åŸºç¡€æŠ€èƒ½**
- Claude Code çš„ä½¿ç”¨æ–¹æ³•
- ä¸ AI æœ‰æ•ˆæ²Ÿé€š
- åŸºæœ¬çš„æ–‡ä»¶æ“ä½œ

âœ… **å¼€å‘æŠ€èƒ½**
- å‰ç«¯å¼€å‘ï¼ˆHTML/CSS/JavaScriptï¼‰
- åç«¯å¼€å‘ï¼ˆNode.js/Pythonï¼‰
- æ•°æ®åº“æ“ä½œ
- API è®¾è®¡

âœ… **å·¥ç¨‹å®è·µ**
- ä»£ç å®¡æŸ¥å’Œé‡æ„
- æµ‹è¯•ï¼ˆå•å…ƒæµ‹è¯•ã€E2Eæµ‹è¯•ï¼‰
- CI/CD è‡ªåŠ¨åŒ–
- æ€§èƒ½ä¼˜åŒ–

âœ… **é«˜çº§æŠ€å·§**
- è®¾è®¡æ¨¡å¼åº”ç”¨
- é¡¹ç›®æ¶æ„è®¾è®¡
- æ’ä»¶ç³»ç»Ÿ
- å¤šè¯­è¨€å¼€å‘

### ç»§ç»­å­¦ä¹ çš„æ–¹å‘

ğŸš€ **æ·±å…¥å­¦ä¹ **
- äº‘åŸç”Ÿå¼€å‘ï¼ˆDockerã€Kubernetesï¼‰
- å¾®æœåŠ¡æ¶æ„
- GraphQL
- æœºå™¨å­¦ä¹ é›†æˆ

ğŸ¯ **å®è·µé¡¹ç›®**
- å¼€æºé¡¹ç›®è´¡çŒ®
- ä¸ªäººä½œå“é›†ç½‘ç«™
- SaaS äº§å“å¼€å‘
- ç§»åŠ¨åº”ç”¨å¼€å‘

ğŸ“š **æ¨èèµ„æº**
- MDN Web Docsï¼ˆWeb å¼€å‘ï¼‰
- freeCodeCampï¼ˆå…è´¹ç¼–ç¨‹è¯¾ç¨‹ï¼‰
- GitHubï¼ˆå¼€æºé¡¹ç›®å­¦ä¹ ï¼‰
- Stack Overflowï¼ˆé—®é¢˜è§£ç­”ï¼‰

---

ğŸ’¡ **æœ€åçš„å»ºè®®**ï¼š
- ä¿æŒå¥½å¥‡å¿ƒï¼Œä¸æ–­å­¦ä¹ 
- å¤šåšé¡¹ç›®ï¼Œå®è·µæ˜¯æœ€å¥½çš„è€å¸ˆ
- å‚ä¸ç¤¾åŒºï¼Œåˆ†äº«ä½ çš„ç»éªŒ
- å–„ç”¨ Claude Codeï¼Œä½†ç†è§£ä»£ç åŸç†
- å†™å‡ºä¼˜é›…çš„ä»£ç ï¼Œè€Œä¸åªæ˜¯èƒ½è¿è¡Œçš„ä»£ç 

ğŸ‰ **æ­å–œä½ å®Œæˆæ‰€æœ‰è¯¾ç¨‹ï¼ç°åœ¨ï¼Œå¼€å§‹åˆ›é€ å±äºä½ çš„é¡¹ç›®å§ï¼**
