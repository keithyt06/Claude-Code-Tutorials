# `/model` 命令示例

## 概述
`/model` 命令允许您选择或更改 Claude Code 使用的 AI model，在 Claude Opus、Sonnet 和 Haiku 之间根据需求进行切换。

## 何时使用
- 为不同任务切换 model
- 优化速度与能力
- 管理成本（不同定价）
- 处理复杂任务与简单任务
- 测试 model 性能

## 示例用法

### 查看当前 Model

```
User: /model

Claude Code: Model 选择
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

当前 Model: Claude Sonnet 4.5

可用 Models:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[1] Claude Opus
    功能最强大，速度最慢，价格最高
    最适合：复杂推理，创意任务
    Context: 200K tokens
    费用：$15/$75 每百万 tokens（输入/输出）

[2] Claude Sonnet 4.5 ✓ 当前
    平衡能力和速度
    最适合：常规开发任务
    Context: 200K tokens
    费用：$3/$30 每百万 tokens

[3] Claude Haiku
    速度最快，效率最高，价格最低
    最适合：简单任务，快速响应
    Context: 200K tokens
    费用：$0.25/$1.25 每百万 tokens

选择 model (1-3) 或按 Enter 保持当前:
```

### 切换到不同 Model

```
User: /model haiku

Claude Code: 正在切换到 Claude Haiku...

✓ Model 已更改为 Claude Haiku

Model: Claude Haiku
特性：
├─ 速度：最快 ⚡⚡⚡
├─ 能力：适合大多数任务
├─ 成本：比 Opus 便宜 95%
└─ Context: 200K tokens

最适合：
- 快速代码格式化
- 简单 bug 修复
- 直接的重构
- 快速原型开发
- 重复性任务

不推荐用于：
- 复杂架构决策
- 高级算法
- 创意问题解决

随时切换回：/model sonnet 或 /model opus
```

## Model 对比

```
User: /model --compare

Claude Code: Model 对比
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

功能对比：
┌─────────────────┬────────┬──────────┬────────┐
│ 功能            │ Haiku  │ Sonnet   │ Opus   │
├─────────────────┼────────┼──────────┼────────┤
│ 速度            │ ⚡⚡⚡    │ ⚡⚡       │ ⚡      │
│ 能力            │ ⭐⭐⭐   │ ⭐⭐⭐⭐    │ ⭐⭐⭐⭐⭐  │
│ 成本（相对）    │ $      │ $$       │ $$$$   │
│ Context         │ 200K   │ 200K     │ 200K   │
└─────────────────┴────────┴──────────┴────────┘

使用场景：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Haiku - 快速高效：
✓ 代码格式化
✓ 简单重构
✓ 快速 bug 修复
✓ 文档编写
✓ 测试生成

Sonnet - 平衡（当前）：
✓ 常规开发
✓ 代码审查
✓ 功能实现
✓ 调试
✓ 架构讨论

Opus - 功能最强：
✓ 复杂算法
✓ 系统设计
✓ 创意解决方案
✓ 深度分析
✓ 学习新概念

成本对比（每 1000 条消息）：
Haiku:  ~$2.50
Sonnet: ~$45.00 (贵 18 倍)
Opus:   ~$135.00 (贵 54 倍)

当前：Sonnet 4.5 ✓
建议：常规使用的好选择
```

## 基于任务的 Model 选择

```
User: 我需要编写复杂算法

User: /model --suggest

Claude Code: Model 推荐
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

基于您的任务："复杂算法"

推荐：Claude Opus

原因：
✓ 最适合复杂推理
✓ 卓越的问题解决能力
✓ 很好地处理算法复杂性
✓ 更详尽的解释

权衡：
⚠ 响应较慢（2-3倍）
⚠ 成本较高（$1.35 vs $0.45）

备选：Sonnet 4.5（当前）
- 可能处理中等复杂的算法
- 更快更便宜
- 先尝试 Sonnet，需要时再切换到 Opus

切换到 Opus？(y/n)
User: y

✓ 已切换到 Claude Opus

您可以随时切换回：/model sonnet
```

## 自动 Model 选择

```
User: /model --auto

Claude Code: 自动 Model 选择
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

启用基于任务的自动 model 切换？

工作原理：
- 简单任务 → Haiku（快速且便宜）
- 常规任务 → Sonnet（平衡）
- 复杂任务 → Opus（需要时）

AI 分析每个请求并选择最优 model。

好处：
✓ 成本优化（仅在需要时使用 Opus）
✓ 速度优化（简单任务使用 Haiku）
✓ 每种任务类型获得最佳结果

启用自动切换？(y/n)
User: y

✓ 已启用自动 model 选择

当前策略：
├─ 简单任务：Haiku
├─ 常规任务：Sonnet（默认）
├─ 复杂任务：Opus
└─ 随时覆盖：/model [名称]

每次响应前将显示 model 选择。
```

## Model 性能

```
User: /model --performance

Claude Code: Model 性能对比
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

您的使用情况（最近 30 天）：

Haiku:
├─ 消息数：234
├─ 平均响应时间：0.8秒
├─ 成本：$2.34
└─ 满意度：⭐⭐⭐⭐

Sonnet 4.5:
├─ 消息数：1,456
├─ 平均响应时间：1.5秒
├─ 成本：$45.67
└─ 满意度：⭐⭐⭐⭐⭐

Opus:
├─ 消息数：89
├─ 平均响应时间：3.2秒
├─ 成本：$38.92
└─ 满意度：⭐⭐⭐⭐⭐

总成本：$86.93

优化建议：
💡 对 40% 的 Sonnet 任务使用 Haiku
   潜在节省：~$18/月（20%）

💡 仅对关键任务使用 Opus
   当前使用：适当 ✓
```

## 按项目设置 Model

```
User: /model --set-default opus

Claude Code: 设置项目默认 Model
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

将 Opus 设为此项目的默认 model？

项目：~/dev/myproject
当前默认：Sonnet 4.5
新默认：Opus

这将：
✓ 在此目录中默认使用 Opus
✓ 影响所有未来会话
✓ 可通过 /model 命令覆盖

使用 Opus 的理由：
[复杂代码库 / 算法工作等]

确认？(y/n)
User: y

✓ 此项目的默认 model 已设为 Opus

其他项目仍将使用全局默认（Sonnet）。

更改回：/model --set-default sonnet
```

## Model 能力

```
User: /model --capabilities

Claude Code: Model 能力
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Claude Haiku:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
优势：
✓ 速度（比 Opus 快 3 倍）
✓ 成本效益（便宜 95%）
✓ 适合常规任务
✓ 对明确定义的问题可靠

局限性：
⚠ 推理能力较弱
⚠ 可能难以处理歧义
⚠ 解释较短
⚠ 创意解决方案较少

Claude Sonnet 4.5:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
优势：
✓ 出色的平衡
✓ 强大的推理能力
✓ 良好的解释
✓ 很好地处理大多数任务
✓ 合理的成本

局限性：
⚠ 不如 Opus 深入
⚠ 中等速度

Claude Opus:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
优势：
✓ 最深入的推理
✓ 最具创造力
✓ 最适合复杂问题
✓ 详尽的解释
✓ 很好地处理歧义

局限性：
⚠ 最慢（慢 2-3 倍）
⚠ 最昂贵（是 Haiku 的 54 倍）
⚠ 对简单任务来说过度

建议：从 Sonnet 开始，根据需要切换
```

## 相关命令

- `/cost` - 查看 model 成本
- `/status` - 检查当前 model
- `/config` - 设置默认 model

## 提示

- 对快速、简单任务使用 Haiku
- 使用 Sonnet 作为常规默认
- 对复杂推理使用 Opus
- 在对话中切换 model
- 设置按项目默认
- 使用 /cost 监控成本
- 尝试自动切换进行优化

## 常见问题

**问：可以在对话中途切换 model 吗？**
答：可以，随时使用 `/model [名称]`

**问：所有 model 的能力都相同吗？**
答：不，Opus 功能最强，Haiku 最快但较简单。

**问：我应该使用哪个 model？**
答：大多数任务用 Sonnet，复杂任务用 Opus，简单任务用 Haiku。

**问：切换会丢失 context 吗？**
答：不会，对话历史会保留。

**问：每个 model 的费用是多少？**
答：Haiku: $0.25/$1.25，Sonnet: $3/$30，Opus: $15/$75 每百万 tokens

**问：可以为不同项目设置不同的默认吗？**
答：可以，在项目目录中使用 `/model --set-default [名称]`。
