# `/privacy-settings` 命令示例

## 概述
`/privacy-settings` 命令允许您查看和控制 Claude Code 如何使用您的数据，包括对话记录、遥测和数据共享偏好。

## 何时使用
- 首次设置 Claude Code
- 审查收集的数据
- 更改遥测偏好
- 遵守公司隐私政策
- 了解数据保留
- 退出分析

## 示例用法

### 场景 1：查看当前设置

```
User: /privacy-settings

Claude Code: 隐私设置
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

当前设置：

📊 遥测 & 分析
├─ 匿名使用统计：已启用 ✓
├─ 错误报告：已启用 ✓
└─ 性能指标：已启用 ✓

💬 对话数据
├─ 对话存储：已启用 ✓
├─ 训练数据选择加入：已禁用 ✗
└─ 对话历史：仅本地

🔒 数据保留
├─ 对话保留：30 天
├─ 日志文件：7 天
└─ Cache 持续时间：24 小时

🌐 网络
├─ 自动更新：已启用 ✓
└─ 崩溃报告：已启用 ✓

选项：
[1] 修改设置
[2] 查看隐私政策
[3] 导出数据
[4] 删除所有数据
[5] 退出

User: 1
```

### 场景 2：禁用遥测

```
User: /privacy-settings

Claude Code: 隐私设置 > 遥测

当前：所有遥测已启用

选项：
[1] 禁用所有遥测
[2] 自定义遥测
[3] 查看收集的内容
[4] 返回

User: 1

Claude Code: 正在禁用所有遥测...

✓ 匿名使用统计：关闭
✓ 错误报告：关闭
✓ 性能指标：关闭

遥测已禁用。

注意：这可能影响我们改进 Claude Code 的能力。
基本错误日志仍在本地保存用于调试。

重启 Claude Code 以使更改生效。
```

### 场景 3：公司合规

```
User: /privacy-settings

User: 我的公司需要严格的隐私控制

Claude Code: 正在应用企业隐私配置文件...

企业隐私设置：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✓ 所有遥测已禁用
✓ 已启用训练数据退出
✓ 仅本地对话存储
✓ 自动数据删除（24小时）
✓ 无云同步
✓ 已启用审计日志

隐私级别：最大

您的数据：
- 仅本地存储
- 不用于训练
- 不与 Anthropic 共享（除 API 调用外）
- 24 小时后自动删除

符合：GDPR、CCPA、HIPAA、SOC 2

保存这些设置？(y/n)

User: y

Claude Code: 企业隐私设置已应用。
```

## 隐私设置类别

### 1. 遥测 & 分析

```
User: /privacy-settings > 遥测

Claude Code: 遥测设置
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

启用时我们收集的内容：

匿名使用统计：
- 使用的命令（频率）
- 会话持续时间
- 功能采用
- 无个人数据或代码内容

错误报告：
- 错误类型和频率
- Stack traces（已脱敏）
- 环境信息（OS、版本）
- 无文件路径或代码内容

性能指标：
- 响应时间
- Token 使用
- 系统资源使用
- 无对话内容

切换选项：
[1] 全部启用
[2] 全部禁用
[3] 自定义选择
[4] 查看完整隐私政策
```

### 2. 对话数据

```
User: /privacy-settings > 对话数据

Claude Code: 对话数据设置
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

对话存储：已启用 ✓
├─ 位置：本地磁盘（~/.config/claude/history/）
├─ 加密：是（AES-256）
├─ 保留：30 天
└─ 大小：245 MB

训练数据选择加入：已禁用 ✗
└─ 您的对话不会用于训练 models

对话历史同步：已禁用 ✗
└─ 对话仅保留在此设备上

选项：
[1] 更改保留期（7/30/90 天/永久）
[2] 清除对话历史
[3] 导出对话
[4] 禁用对话存储
[5] 启用云同步（需要选择加入）
```

### 3. 数据保留

```
User: /privacy-settings > 数据保留

Claude Code: 数据保留设置
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

对话保留：30 天
└─ 自动删除 30 天前的对话

日志文件：7 天
└─ 保留诊断日志用于故障排查

Cache 持续时间：24 小时
└─ API 响应 cache

临时文件：立即清理
└─ 会话结束时删除

当前存储使用：
├─ 对话：245 MB
├─ 日志：12 MB
├─ Cache: 8 MB
└─ 总计：265 MB

选项：
[1] 更改保留期
[2] 立即清除所有数据
[3] 查看数据位置
[4] 设置自动清理计划
```

## 常见隐私配置

### 最大隐私（偏执模式）

```
User: /privacy-settings

User: 应用最大隐私设置

Claude Code: 正在应用最大隐私配置...

最大隐私设置：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✓ 零遥测（全部禁用）
✓ 无对话存储
✓ 无训练数据共享
✓ Cache 已禁用
✓ 日志最小化（仅错误）
✓ 退出时自动删除
✓ 仅本地处理（如可能）

⚠️ 警告：某些功能可能受限：
- 无对话历史
- 无法 /rewind 超出当前会话
- 无崩溃报告（更难调试）
- 无使用统计（无法优化）

应用？(y/n)

User: y

Claude Code: 已启用最大隐私。
退出 Claude Code 时将删除所有数据。
```

### 平衡（推荐）

```
User: /privacy-settings

User: 应用推荐设置

Claude Code: 推荐隐私设置：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✓ 匿名遥测：开启
✓ 崩溃报告：开启
✓ 对话存储：本地（30 天）
✓ 训练数据：关闭
✓ 云同步：关闭

这提供：
- 良好的隐私保护
- 有用的功能（历史、rewind）
- 帮助改进 Claude Code
- 不共享代码用于训练

应用？(y/n)
```

### 公司/企业

```
User: /privacy-settings

User: 应用公司设置

Claude Code: 公司隐私配置文件：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

✓ 所有遥测：关闭
✓ 审计日志：开启（仅本地）
✓ 对话保留：可配置
✓ 数据位置：仅本地
✓ 训练退出：强制
✓ 加密：静态 AES-256
✓ 合规标签：GDPR、SOC 2、HIPAA

额外公司功能：
- 管理员策略执行
- 数据丢失防护
- 访问审计跟踪
- 无外部数据传输

需要：企业许可
```

## 数据管理

### 查看所有存储数据

```
User: /privacy-settings > 查看我的数据

Claude Code: 您的数据存储：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━

对话：
├─ 位置：~/.config/claude/history/
├─ 数量：47 个对话
├─ 大小：245 MB
├─ 最旧：2024-12-09
└─ 最新：2025-01-08

配置：
├─ 位置：~/.config/claude/config/
└─ 大小：124 KB

日志：
├─ 位置：~/.config/claude/logs/
├─ 数量：15 个文件
└─ 大小：12 MB

Cache:
├─ 位置：~/.config/claude/cache/
└─ 大小：8 MB

总计：265 MB

选项：
[1] 打开数据目录
[2] 导出所有数据
[3] 删除特定类别
[4] 删除所有内容
```

### 导出您的数据

```
User: /privacy-settings > 导出数据

Claude Code: 数据导出选项：
━━━━━━━━━━━━━━━━━━━━━━━━━━━

选择要导出的内容：
[✓] 对话
[✓] 配置
[✓] 设置
[ ] 日志（调试信息）
[ ] Cache（临时数据）

导出格式：
( ) JSON
( ) Markdown
(•) ZIP 存档

导出位置：~/Downloads/claude-export-2025-01-08.zip

[导出] [取消]

User: [点击导出]

Claude Code: 正在导出数据...

✓ 已导出 47 个对话
✓ 已导出配置文件
✓ 已导出设置
✓ 已创建存档：claude-export-2025-01-08.zip（28 MB）

您的数据导出准备就绪：
~/Downloads/claude-export-2025-01-08.zip

这包括您的所有对话和设置。
```

### 删除所有数据

```
User: /privacy-settings > 删除所有数据

Claude Code: ⚠️  删除所有数据

这将永久删除：
- 所有对话历史（47 个对话）
- 配置文件
- 缓存数据
- 日志文件
- 所有存储数据（265 MB）

此操作无法撤消。

输入 "DELETE ALL" 确认：

User: DELETE ALL

Claude Code: 需要最终确认。

您绝对确定吗？(y/n)

User: y

Claude Code: 正在删除所有数据...

✓ 对话已删除（245 MB）
✓ 配置已删除（124 KB）
✓ 日志已清除（12 MB）
✓ Cache 已清除（8 MB）
✓ 所有数据已删除（释放 265 MB）

数据删除完成。

Claude Code 现在将使用默认设置重启。
```

## 隐私合规

### GDPR 合规

```
User: /privacy-settings > GDPR

Claude Code: GDPR 合规：
━━━━━━━━━━━━━━━━━━━━━━━━━━━

您的权利：
✓ 访问权：使用 /privacy-settings > 查看数据
✓ 导出权：使用 /privacy-settings > 导出
✓ 删除权：使用 /privacy-settings > 删除
✓ 更正权：编辑配置文件
✓ 限制权：禁用遥测
✓ 可移植权：导出为 JSON/ZIP
✓ 反对权：退出训练数据

数据控制者：Anthropic PBC
数据处理者：您的设备（本地存储）

GDPR 请求：privacy@anthropic.com
```

### 数据处理协议

```
User: /privacy-settings > 隐私政策

Claude Code: Claude Code 隐私概述：
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

我们收集的内容：
- API 请求（服务所需）
- 可选遥测（如启用）
- 错误报告（如启用）

我们不收集的内容：
- 您的源代码（保留在本地）
- 文件内容（本地处理）
- 密码或 secrets
- 个人识别信息

数据存储位置：
- 对话：您的设备（加密）
- API 请求：Anthropic servers（处理，不存储）
- 遥测：仅匿名聚合

训练数据：
- 默认：不用于训练
- 仅选择加入：您必须明确启用

完整隐私政策：
https://www.anthropic.com/privacy
```

## 隐私提示 & 最佳实践

### 1. 初始设置

```
首次使用 Claude Code 时：

User: /privacy-settings

审查并调整：
1. 遥测（如偏好则禁用）
2. 对话保留（设置适当期限）
3. 训练数据（如需要确保退出）
4. 数据位置（如需要确认仅本地）
```

### 2. 敏感项目

```
对于机密工作：

User: /privacy-settings

启用：
✓ 最大隐私模式
✓ 仅本地存储
✓ 短保留期（24小时）
✓ 无遥测
✓ 训练退出

User: /sandbox（用于额外隔离）
```

### 3. 定期审计

```
每月隐私检查：

User: /privacy-settings > 查看数据

审查：
- 存储大小（如大则清理）
- 保留期（如需要则调整）
- 遥测设置（验证偏好）
- 旧对话（如敏感则删除）
```

## 故障排除

### 设置未保存

```
User: /privacy-settings
[更改设置但不持久]

解决方案：
1. 检查文件权限：
   ls -la ~/.config/claude/

2. 验证配置文件：
   cat ~/.config/claude/privacy-config.json

3. 运行诊断：
   /doctor

4. 手动编辑配置（高级）：
   nano ~/.config/claude/privacy-config.json
```

### 无法删除数据

```
User: /privacy-settings > 删除所有数据

Claude Code: 错误：无法删除数据（文件正在使用）

解决方案：
1. 完全退出 Claude Code
2. 手动删除：
   rm -rf ~/.config/claude/history/*
3. 重启 Claude Code
```

## 相关命令

- `/config` - 常规配置设置
- `/status` - 查看当前账户和数据状态
- `/export` - 导出对话历史
- `/logout` - 清除会话数据
- `/doctor` - 诊断隐私/安全问题

## 提示

- 首次安装 Claude Code 时审查隐私设置
- 对敏感/机密工作使用最大隐私模式
- 完全删除前导出数据
- 定期检查数据保留以管理存储
- 对公司/合规要求禁用遥测
- 如果处理专有代码则退出训练数据
- 对敏感项目使用 `/sandbox` 以获得额外安全性

## 常见问题

**问：我的代码会发送到 Anthropic servers 吗？**
答：仅发送 API 请求。除非在提示中明确包含，否则文件内容在本地处理。

**问：可以完全禁用所有数据收集吗？**
答：可以，启用"最大隐私"模式以禁用所有遥测并最小化数据存储。

**问：我的对话历史存储在哪里？**
答：本地存储在您的设备上的 `~/.config/claude/history/`（已加密）。

**问：默认选择加入训练数据吗？**
答：不，训练数据选择加入默认禁用。您必须明确启用它。

**问：如何遵守 GDPR？**
答：使用隐私设置根据需要导出、删除或限制数据处理。

**问：我的公司可以强制隐私设置吗？**
答：可以，使用企业许可，管理员可以通过配置管理强制执行隐私政策。
