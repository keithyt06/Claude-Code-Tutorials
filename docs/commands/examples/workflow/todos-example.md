# `/todos` 命令示例

## 概述
`/todos` 命令显示当前会话中所有待处理、进行中和已完成的任务。

## 何时使用
- 检查剩余任务
- 审查已完成的工作
- 跟踪复杂功能的进度
- 休息后恢复工作
- 与团队分享进度

## 示例用法

### 查看当前 Todos

```
User: /todos

Claude Code: 当前 Todo 列表

⏳ 待处理 (3)：
1. 为支付服务添加错误处理
2. 为用户认证编写测试
3. 更新 API 文档

🔄 进行中 (1)：
1. 实现 JWT token 刷新逻辑

✅ 已完成 (2)：
1. 设置 PostgreSQL 数据库
2. 创建用户注册 endpoint
```

## Todo 生命周期

### 创建 Todos

当您分配复杂任务时会自动创建 Todos：

```
User: 我需要：
1. 为用户列表添加分页
2. 实现搜索功能
3. 添加排序选项
4. 为上述所有功能编写测试

Claude Code: 我将把这分解为任务：

已创建的 todos：
1. 为用户列表添加分页
2. 实现搜索功能
3. 添加排序选项
4. 为所有功能编写测试

开始任务 1...
```

### 跟踪进度

```
User: /todos

⏳ 待处理 (3)：
2. 实现搜索功能
3. 添加排序选项
4. 为所有功能编写测试

🔄 进行中 (1)：
1. 为用户列表添加分页

✅ 已完成 (0)：

[Claude 处理分页]

Claude Code: 分页完成。进入下一任务...

User: /todos

⏳ 待处理 (2)：
3. 添加排序选项
4. 为所有功能编写测试

🔄 进行中 (1)：
2. 实现搜索功能

✅ 已完成 (1)：
1. 为用户列表添加分页 ✓
```

## 实际示例

### 示例 1：功能开发

```
User: 构建一个完整的博客文章编辑器，包含：
- 富文本编辑
- 图片上传
- 自动保存草稿
- 标签管理
- 预览模式

Claude Code: 我将逐步实现此功能。

[自动创建 todos]

User: /todos

⏳ 待处理 (4)：
1. 实现富文本编辑器
2. 添加图片上传功能
3. 创建自动保存机制
4. 构建标签管理 UI
5. 添加预览模式

🔄 进行中 (1)：
设置编辑器组件结构

[工作进展]

User: /todos

⏳ 待处理 (1)：
5. 添加预览模式

🔄 进行中 (1)：
4. 构建标签管理 UI

✅ 已完成 (3)：
1. 实现富文本编辑器 ✓
2. 添加图片上传功能 ✓
3. 创建自动保存机制 ✓
```

### 示例 2：Bug 修复

```
User: 修复认证 bugs：
1. 会话过早过期
2. 密码重置不工作
3. 记住我复选框损坏

Claude Code: 我将系统地修复这些问题。

User: /todos

⏳ 待处理 (3)：
1. 修复会话过期时间
2. 调试密码重置流程
3. 修复记住我功能

🔄 进行中 (1)：
正在调查会话配置

User: 实际上，现在跳过 #2，它优先级较低

Claude Code: 已从活动 todos 中删除。

User: /todos

⏳ 待处理 (1)：
3. 修复记住我功能

🔄 进行中 (1)：
1. 修复会话过期时间

📋 积压 (1)：
2. 调试密码重置流程
```

### 示例 3：重构

```
User: 重构支付模块以提高可维护性

Claude Code: 我将分析并创建重构计划。

已创建的 todos：
1. 将支付提供商提取到单独模块
2. 创建共享支付接口
3. 添加适当的错误处理
4. 提高测试覆盖率
5. 更新文档

User: /todos

显示所有 5 个任务...

[一些工作后]

User: /todos

✅ 已完成 (5)：
1. 将支付提供商提取到单独模块 ✓
2. 创建共享支付接口 ✓
3. 添加适当的错误处理 ✓
4. 提高测试覆盖率 (85% → 95%) ✓
5. 更新文档 ✓

所有任务完成！支付模块已成功重构。
```

## 管理 Todos

### 添加手动 Todos

```
User: 添加一个 todo 来实现速率限制

Claude Code: 已添加到 todo 列表：
⏳ 为 API endpoints 实现速率限制

User: /todos

⏳ 待处理 (4)：
1. [现有 todos...]
2. 为 API endpoints 实现速率限制
```

### 删除 Todos

```
User: /todos

User: 删除文档任务，我们稍后再做

Claude Code: 已从 todos 中删除"更新 API 文档"。
```

### 重新排序优先级

```
User: /todos

User: 将安全修复设为最高优先级

Claude Code: 已重新排序 todos：

⏳ 待处理：
1. 修复 SQL 注入漏洞（上移）
2. 添加分页
3. 实现搜索
```

## Todo 状态

### 待处理 → 进行中
```
当 Claude 开始处理任务时：

⏳ 待处理 (3)：
1. 实现用户搜索
2. 添加分页
3. 编写测试

[Claude 开始工作]

🔄 进行中 (1)：
1. 实现用户搜索

⏳ 待处理 (2)：
2. 添加分页
3. 编写测试
```

### 进行中 → 已完成
```
任务完成时：

🔄 进行中 (1)：
1. 实现用户搜索

[工作完成]

✅ 已完成 (1)：
1. 实现用户搜索 ✓
   - 添加了搜索 API endpoint
   - 创建了搜索 UI 组件
   - 添加了测试（95% 覆盖率）
```

### 处理阻塞

```
遇到问题时：

🔄 进行中 (1)：
1. 实现 OAuth 登录

⚠️ 阻塞 (1)：
1. 实现 OAuth 登录
   问题：缺少 client 凭据
   需要：用户提供 OAuth 应用凭据
```

## 高级 Todo 功能

### 子任务

```
User: /todos

🔄 进行中 (1)：
1. 实现用户认证
   ✅ 创建用户 model
   ✅ 添加密码哈希
   🔄 实现 JWT tokens
   ⏳ 添加刷新 token 逻辑
   ⏳ 创建认证 middleware
```

### 带 Context 的 Todo

```
User: /todos

✅ 已完成：
1. 修复 UserList 组件中的内存泄漏 ✓
   - 为 useEffect 添加了清理函数
   - 修复了事件监听器删除
   - 使用 Chrome DevTools 测试
   - 修复后内存使用稳定
   文件：src/components/UserList.tsx:67-89
```

### 预估 vs 实际

```
User: /todos --detailed

🔄 进行中：
1. 重构数据库层
   预估：2 小时
   已用：45 分钟
   进度：60%
   剩余任务：
   - 迁移 users 表（完成）
   - 迁移 posts 表（进行中）
   - 更新查询（待处理）
   - 测试迁移（待处理）
```

## Todo 持久化

### 保存 Todos

```
User: /todos --save todos.md

Claude Code: 已将当前 todos 保存到 todos.md

# Todo 列表 - 2025-01-08

## 进行中
- [ ] 实现搜索功能

## 待处理
- [ ] 添加分页
- [ ] 编写测试
- [ ] 更新文档

## 已完成
- [x] 设置数据库
- [x] 创建 API endpoints
```

### 加载 Todos

```
User: 加载昨天的 todos

Claude Code: 从上次会话加载了 5 个 todos。

⏳ 待处理 (3)：
[上次会话的任务]
```

## 与其他命令集成

### 与 /review 配合

```
User: /review

Claude Code: 发现 8 个问题

创建 todos：
1. 修复 SQL 注入（高优先级）
2. 添加输入验证（中等）
3. 改进错误消息（低）

User: /todos

⏳ 待处理 (3)：
1. 修复 SQL 注入漏洞 ⚠️ 高
2. 为表单添加输入验证
3. 改进错误消息
```

### 与 /export 配合

```
User: /export session-summary.md

Claude Code: 已导出对话，包括：
- 所有 todos（待处理、进行中、已完成）
- 所做的代码更改
- 讨论的决策

已保存到 session-summary.md
```

## 最佳实践

### 1. 保持 Todos 具体
```
❌ 不好：
- 修复 bugs
- 改进代码

✅ 好：
- 修复 UserService.ts:45 中的空指针错误
- 重构支付处理以使用策略模式
```

### 2. 拆分大任务
```
不要：
- 构建用户仪表板

使用：
- 创建仪表板布局组件
- 添加用户统计小部件
- 实现数据获取
- 添加图表和可视化
- 编写测试
```

### 3. 定期审查 Todos
```
完成几个任务后：
User: /todos

审查剩余内容，调整优先级
```

### 4. 清除已完成的 Todos
```
User: /todos --clear-completed

Claude Code: 已清除 15 个已完成的 todos。
保持对活跃工作的专注。
```

## 提示
- 使用 `/todos` 在休息后恢复工作
- Todos 帮助跟踪复杂的多步骤功能
- 已完成的 todos 向利益相关者展示进度
- 导出 todos 用于项目管理工具
- 清除已完成的 todos 以减少混乱
- Todos 在同一会话内持久存在

## 相关命令
- `/review` - 从发现的问题创建 todos
- `/export` - 将 todos 保存到文件
- `/clear` - 清除 todos 和对话
- `/compact` - 保留重要的 todos
